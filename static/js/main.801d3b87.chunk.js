(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{178:function(e,t,n){e.exports=n(339)},183:function(e,t,n){},184:function(e,t,n){},337:function(e,t,n){},339:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(7),c=n.n(o),s=(n(183),n(41)),i=n(42),l=n(46),u=n(43),d=n(47),p=n(340),f=n(37),m=(n(184),n(158)),b=p.a.Header,y=function(e){return a.a.createElement(b,{className:"appHeader"},a.a.createElement("div",{className:"headerLeft"},a.a.createElement("div",{className:"logo"}),a.a.createElement("div",{className:"pageTitle"},"Live Stock")),a.a.createElement("div",{className:"headerRight"},a.a.createElement(m.Detector,{render:function(e){var t=e.online;return a.a.createElement(f.a,{type:t?"primary":"danger"},t?"Live":"Offline")}})))},h=n(45),O=n(10),v=n(341),g=n(162),k=n.n(g),j=[{title:"Name",dataIndex:"stockName",key:"stockName"},{title:"Price",dataIndex:"stockPrice",key:"stockPrice",render:function(e,t){var n=t.changePercent;return n&&0!==n?n>0?a.a.createElement("span",{style:{color:"green"}},e,a.a.createElement(O.a,{type:"caret-up",style:{color:"green"}})):a.a.createElement("span",{style:{color:"red"}},e,a.a.createElement(O.a,{type:"caret-down",style:{color:"red"}})):a.a.createElement("span",null,e)}},{title:"% Change",dataIndex:"changePercent",key:"changePercent",render:function(e){if(e&&0!==e)return e>0?a.a.createElement("span",{style:{color:"green"}},e):a.a.createElement("span",{style:{color:"red"}},e)}},{title:"LastUpdated",dataIndex:"stockTrend",key:"lastUpdated",render:function(e){var t=e.length;return a.a.createElement(k.a,{date:e[t-1][0]})}}],E=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=function(e){return Object.values(e)}(this.props.data);return a.a.createElement("div",{style:{width:"37%"}},a.a.createElement(v.a,{columns:j,dataSource:e,bordered:!0,showHeader:!0,rowKey:"stockName",pagination:{defaultPageSize:8,pageSize:8}}))}}]),t}(r.PureComponent),w=n(100),P="LOAD_STOCKS",S="INCOMING_STOCKS",x="SELECT_STOCK",C="SERVER_ERROR",N=n(68),D=n.n(N),L=n(171),T=n.n(L),z=n(172),H=n.n(z),I=n(173),R={chart:{id:"realtime",animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:800}},dataLabels:{enabled:!0,style:{colors:["#333"]},offsetX:30},tooltip:{enabled:!0,shared:!0,followCursor:!0,marker:{show:!0}},stroke:{curve:"smooth"},title:{text:"",align:"left"},toolbar:{show:!0,tools:{selection:!1,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0},onDatasetHover:{highlightDataSeries:!0}},zoom:{enabled:!0}}},A=n(75),F=n.n(A);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(n,!0).forEach(function(t){Object(w.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var _={xaxis:{type:"datetime",labels:{formatter:function(e,t){return F()(e).format("HH:mm:ss")}},title:{text:"Timestamp in (HH:mm:ss)"}},yaxis:{title:{text:"Price ($)"}},markers:{size:6},legend:{show:!0},noData:{text:"Loading...",style:{fontSize:"24px"}},grid:{borderColor:"#e7e7e7",show:!0,row:{colors:["#f3f3f3","transparent"],opacity:.5}}},J=function(e){return e.filter(function(e){return!!e.isSelected})},M=function(e){return e.map(function(e){return{name:e.stockName,data:e.stockTrend}})},B=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object.values(this.props.stocks);D()(e)||(0,this.props.handleSelectedTab)(T()(e).stockName)}},{key:"componentDidUpdate",value:function(){var e=Object.values(this.props.stocks),t=J(e);if(!D()(t)){var n=M(t);I.a.exec("realtime","updateSeries",n)}}},{key:"render",value:function(){var e=this.props,t=e.stocks,n=e.handleSelectedTab,r=Object.values(t),o=function(e,t){return e.map(function(e){return a.a.createElement(f.a,{style:{padding:"0 14px"},value:e.stockName,key:e.stockName,type:e.isSelected?"primary":"default",size:"large",onClick:t},e.stockName)})}(r,n),c=J(r),s=D()(c)?[]:M(c);return a.a.createElement("div",{style:{width:"68%"}},o,a.a.createElement(H.a,{type:"line",options:U({},R,{},_),series:s}))}}]),t}(a.a.Component),G=Object(h.b)(function(e){return{stocks:e.stocks}},function(e){return{dispatch:e,handleSelectedTab:function(t){var n="string"===typeof t?t:t.target.value;e({type:x,payload:n})}}})(B),V=n(166),W=(n(337),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.stocks;return e.isLoading?a.a.createElement(V.a,{tip:"Fetching data...",size:"large"}):a.a.createElement("div",{className:"container"},a.a.createElement(G,null),a.a.createElement(E,{data:t}))}}]),t}(r.PureComponent)),X=Object(h.b)(function(e){return{stocks:e.stocks,isLoading:e.isLoading}})(W),$=n(342),q=function(){return $.a.info({title:"Content Blocked",content:"Click on Load Unsafe Scripts to proceed. It's just an app showing stocks"})},Q=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={hasError:!1},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidCatch",value:function(e,t){console.log("Hi inside did catch",e,t),this.setState({hasError:!0})}},{key:"render",value:function(){var e=this.state.hasError;return this.props.hasConnectionError||e?a.a.createElement(q,null):a.a.createElement("div",{className:"App"},a.a.createElement(p.a,{className:"appLayout"},a.a.createElement(y,null),a.a.createElement(p.a.Content,null,a.a.createElement(X,null))))}}],[{key:"getDerivedStateFromError",value:function(e){return console.log("Hi inside getDerived"),{hasError:!0}}}]),t}(a.a.PureComponent),Y=Object(h.b)(function(e){return{hasConnectionError:e.hasConnectionError}})(Q),Z=n(56),ee=n(101),te=n(176);function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(n,!0).forEach(function(t){Object(w.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ae={stocks:{}};var oe=n(78),ce=n.n(oe),se=n(69),ie=ce.a.mark(de),le=ce.a.mark(pe);function ue(){return Object(ee.b)(function(e){var t=new WebSocket("ws://stocks.mnet.website");t.addEventListener("error",function(t){console.log("Connection error"),e(t)}),t.addEventListener("open",function(){console.log("opening...")}),t.addEventListener("message",function(t){var n=JSON.parse(t.data);e(n)});return function(){t.addEventListener("close",function(e){e.wasClean?console("[close] Connection closed cleanly, code=".concat(e.code," reason=").concat(e.reason)):console.log("[close] Connection died")})}})}function de(){var e,t;return ce.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(se.b)(ue);case 2:e=n.sent;case 3:return n.prev=4,n.next=7,Object(se.d)(e);case 7:return t=n.sent,n.next=10,Object(se.c)({type:S,payload:t});case 10:n.next=16;break;case 12:return n.prev=12,n.t0=n.catch(4),n.next=16,Object(se.c)({type:C,payload:n.t0});case 16:n.next=3;break;case 18:case"end":return n.stop()}},ie,null,[[4,12]])}function pe(){return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(se.a)([de()]);case 2:case"end":return e.stop()}},le)}var fe=Object(ee.a)(),me=Object(Z.d)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:var n=re({},e.stocks),r=t.payload,a=Date.now();return r.forEach(function(e){var t=Object(te.a)(e,2),r=t[0],o=t[1];if(o=+o.toFixed(2),D()(n[r]))n[r]={stockPrice:o,stockName:r,stockTrend:[[Date.now(),o]],isSelected:!1};else{var c=n[r];c.changePercent=(100*(+o-+c.stockPrice)/+c.stockPrice).toFixed(2),c.stockPrice=o,c.stockTrend.push([a,o])}}),re({},e,{stocks:n,isLoading:!1,hasError:!1});case x:var o=t.payload,c=e.stocks,s=c[o];return s.isSelected=!s.isSelected,re({},e,{stocks:c});case P:return re({},e,{isLoading:!0});case C:return re({},e,{hasConnectionError:!0,errorMessage:t.payload});default:return e}},Object(Z.a)(fe));fe.run(pe),me.dispatch({type:P,isLoading:!0}),c.a.render(a.a.createElement(h.a,{store:me},a.a.createElement(Y,null)),document.getElementById("root"))}},[[178,1,2]]]);
//# sourceMappingURL=main.801d3b87.chunk.js.map