(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{178:function(e,t,n){e.exports=n(339)},183:function(e,t,n){},184:function(e,t,n){},337:function(e,t,n){},339:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(7),o=n.n(c),s=(n(183),n(41)),i=n(42),l=n(46),u=n(43),d=n(47),p=n(342),f=n(340),m=n(37),b=(n(184),n(158)),y=f.a.Header,O=function(e){return a.a.createElement(y,{className:"appHeader"},a.a.createElement("div",{className:"headerLeft"},a.a.createElement("div",{className:"logo"}),a.a.createElement("div",{className:"pageTitle"},"Live Stock")),a.a.createElement("div",{className:"headerRight"},a.a.createElement(b.Detector,{render:function(e){var t=e.online;return a.a.createElement(m.a,{type:t?"primary":"danger"},t?"Live":"Offline")}})))},h=n(45),v=n(10),g=n(341),k=n(162),j=n.n(k),E=[{title:"Name",dataIndex:"stockName",key:"stockName"},{title:"Price",dataIndex:"stockPrice",key:"stockPrice",render:function(e,t){var n=t.changePercent;return n&&0!==n?n>0?a.a.createElement("span",{style:{color:"green"}},e,a.a.createElement(v.a,{type:"caret-up",style:{color:"green"}})):a.a.createElement("span",{style:{color:"red"}},e,a.a.createElement(v.a,{type:"caret-down",style:{color:"red"}})):a.a.createElement("span",null,e)}},{title:"% Change",dataIndex:"changePercent",key:"changePercent",render:function(e){if(e&&0!==e)return e>0?a.a.createElement("span",{style:{color:"green"}},e):a.a.createElement("span",{style:{color:"red"}},e)}},{title:"LastUpdated",dataIndex:"stockTrend",key:"lastUpdated",render:function(e){var t=e.length;return a.a.createElement(j.a,{date:e[t-1][0]})}}],w=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=function(e){return Object.values(e)}(this.props.data);return a.a.createElement("div",{style:{width:"37%"}},a.a.createElement(g.a,{columns:E,dataSource:e,bordered:!0,showHeader:!0,rowKey:"stockName",pagination:{defaultPageSize:8,pageSize:8}}))}}]),t}(r.PureComponent),P=n(100),S="LOAD_STOCKS",x="INCOMING_STOCKS",N="SELECT_STOCK",L="SERVER_ERROR",C=n(68),D=n.n(C),T=n(171),z=n.n(T),H=n(172),I=n.n(H),M=n(173),R={chart:{id:"realtime",animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:800}},dataLabels:{enabled:!0,style:{colors:["#333"]},offsetX:30},tooltip:{enabled:!0,shared:!0,followCursor:!0,marker:{show:!0}},stroke:{curve:"smooth"},title:{text:"",align:"left"},toolbar:{show:!0,tools:{selection:!1,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0},onDatasetHover:{highlightDataSeries:!0}},zoom:{enabled:!0}}},K=n(74),_=n.n(K);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach(function(t){Object(P.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var J={xaxis:{type:"datetime",labels:{formatter:function(e,t){return _()(e).format("HH:mm:ss")}},title:{text:"Timestamp in (HH:mm:ss)"}},yaxis:{title:{text:"Price ($)"}},markers:{size:6},legend:{show:!0},noData:{text:"Loading...",style:{fontSize:"24px"}},grid:{borderColor:"#e7e7e7",show:!0,row:{colors:["#f3f3f3","transparent"],opacity:.5}}},U=function(e){return e.filter(function(e){return!!e.isSelected})},G=function(e){return e.map(function(e){return{name:e.stockName,data:e.stockTrend}})},B=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object.values(this.props.stocks);D()(e)||(0,this.props.handleSelectedTab)(z()(e).stockName)}},{key:"componentDidUpdate",value:function(){var e=Object.values(this.props.stocks),t=U(e);if(!D()(t)){var n=G(t);M.a.exec("realtime","updateSeries",n)}}},{key:"render",value:function(){var e=this.props,t=e.stocks,n=e.handleSelectedTab,r=Object.values(t),c=function(e,t){return e.map(function(e){return a.a.createElement(m.a,{style:{padding:"0 14px"},value:e.stockName,key:e.stockName,type:e.isSelected?"primary":"default",size:"large",onClick:t},e.stockName)})}(r,n),o=U(r),s=D()(o)?[]:G(o);return a.a.createElement("div",{style:{width:"68%"}},c,a.a.createElement(I.a,{type:"line",options:F({},R,{},J),series:s}))}}]),t}(a.a.Component),V=Object(h.b)(function(e){return{stocks:e.stocks}},function(e){return{dispatch:e,handleSelectedTab:function(t){var n="string"===typeof t?t:t.target.value;e({type:N,payload:n})}}})(B),W=n(166),X=(n(337),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.stocks;return e.isLoading?a.a.createElement(W.a,{tip:"Fetching data...",size:"large"}):a.a.createElement("div",{className:"container"},a.a.createElement(V,null),a.a.createElement(w,{data:t}))}}]),t}(r.PureComponent)),$=Object(h.b)(function(e){return{stocks:e.stocks,isLoading:e.isLoading}})(X),q=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.hasError,n=e.errorMessage;return t?p.a.error({content:n,title:"Error"}):a.a.createElement("div",{className:"App"},a.a.createElement(f.a,{className:"appLayout"},a.a.createElement(O,null),a.a.createElement(f.a.Content,null,a.a.createElement($,null))))}}]),t}(a.a.PureComponent),Q=Object(h.b)(function(e){return{hasError:e.hasError,errorMessage:e.errorMessage}})(q),Y=n(56),Z=n(101),ee=n(176);function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(n,!0).forEach(function(t){Object(P.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var re={stocks:{}};var ae=n(77),ce=n.n(ae),oe=n(69),se=ce.a.mark(ue),ie=ce.a.mark(de);function le(){return Object(Z.b)(function(e){var t=new WebSocket("ws://stocks.mnet.website");t.addEventListener("error",function(t){e(new Error(t))}),t.addEventListener("open",function(){console.log("opening...")}),t.addEventListener("message",function(t){var n=JSON.parse(t.data);e(n)});return function(){t.addEventListener("close",function(e){e.wasClean?console("[close] Connection closed cleanly, code=".concat(e.code," reason=").concat(e.reason)):console.log("[close] Connection died")})}})}function ue(){var e,t;return ce.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(oe.b)(le);case 2:e=n.sent;case 3:return n.prev=4,n.next=7,Object(oe.d)(e);case 7:return t=n.sent,n.next=10,Object(oe.c)({type:x,payload:t});case 10:n.next=16;break;case 12:return n.prev=12,n.t0=n.catch(4),n.next=16,Object(oe.c)({type:L,payload:n.t0});case 16:n.next=3;break;case 18:case"end":return n.stop()}},se,null,[[4,12]])}function de(){return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.a)([ue()]);case 2:case"end":return e.stop()}},ie)}var pe=Object(Z.a)(),fe=Object(Y.d)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:var n=ne({},e.stocks),r=t.payload,a=Date.now();return r.forEach(function(e){var t=Object(ee.a)(e,2),r=t[0],c=t[1];if(c=+c.toFixed(2),D()(n[r]))n[r]={stockPrice:c,stockName:r,stockTrend:[[Date.now(),c]],isSelected:!1};else{var o=n[r];o.changePercent=(100*(+c-+o.stockPrice)/+o.stockPrice).toFixed(2),o.stockPrice=c,o.stockTrend.push([a,c])}}),ne({},e,{stocks:n,isLoading:!1,hasError:!1});case N:var c=t.payload,o=e.stocks,s=o[c];return s.isSelected=!s.isSelected,ne({},e,{stocks:o});case S:return ne({},e,{isLoading:!0});case L:return ne({},e,{hasError:!0,errorMessage:t.payload});default:return e}},Object(Y.a)(pe));pe.run(de),fe.dispatch({type:S,isLoading:!0}),o.a.render(a.a.createElement(h.a,{store:fe},a.a.createElement(Q,null)),document.getElementById("root"))}},[[178,1,2]]]);
//# sourceMappingURL=main.2edbe306.chunk.js.map